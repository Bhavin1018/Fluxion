"use strict";var m=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var q=(t,e)=>{for(var o in e)m(t,o,{get:e[o],enumerable:!0})},H=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of C(e))!j.call(t,s)&&s!==o&&m(t,s,{get:()=>e[s],enumerable:!(n=X(e,s))||n.enumerable});return t};var V=t=>H(m({},"__esModule",{value:!0}),t);var Q={};q(Q,{createAsyncAction:()=>O,createAsyncMiddleware:()=>A,createCombinedSelector:()=>R,createHooks:()=>U,createLoggerMiddleware:()=>v,createPersistMiddleware:()=>K,createSelector:()=>w,createSelectorFactory:()=>I,createSlice:()=>P,createSnapshotManager:()=>_,createSnapshotMiddleware:()=>F,createStore:()=>E,createThrottleMiddleware:()=>M,createUseAsyncAction:()=>k,createUseSlice:()=>N,getErrors:()=>J,isLoading:()=>L,shallowEqual:()=>x});module.exports=V(Q);var b=require("immer");function E(t,e={}){let{middleware:o=[],devtools:n=!1,name:s="ReactFlow Store"}=e,r={...t},c=new Set,a=()=>r,l=(d,y)=>{let f=d;for(let T of o){let h=T(f,y,i);h!==void 0&&(f=h)}return f},i=d=>{let y={...r},f;typeof d=="function"?f=(0,b.produce)(r,h=>d(h)):f={...r,...d},o.length>0&&(f=l(f,y)),r=f,c.forEach(T=>T(r,y)),n&&typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__.connect({name:s}).send("UPDATE",r)},u=d=>(c.add(d),{unsubscribe:()=>{c.delete(d)}}),p=d=>d(r),g=()=>{c.clear()};return n&&typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__.connect({name:s}).init(r),{getState:a,setState:i,subscribe:u,use:p,destroy:g}}var S=require("react");function U(t){let e=s=>{let r=s||(i=>i),[c,a]=(0,S.useState)(()=>r(t.getState())),l=(0,S.useRef)(c);return(0,S.useEffect)(()=>{a(r(t.getState()));let i=t.subscribe(u=>{let p=r(u);z(p,l.current)||(l.current=p,a(p))});return()=>{i.unsubscribe()}},[]),[c,t.setState]};return{useStore:e,useSelector:s=>{let[r]=e(s);return r},useDispatch:()=>(0,S.useCallback)(t.setState,[])}}function z(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let o=Object.keys(t),n=Object.keys(e);if(o.length!==n.length)return!1;for(let s=0;s<o.length;s++){let r=o[s];if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1}return!0}function v(t={}){let{collapsed:e=!1,diff:o=!0}=t;return(n,s)=>{if(typeof window>"u")return n;if((e?console.groupCollapsed:console.group)("%c ReactFlow State Update","color: #4CAF50; font-weight: bold;"),console.log("%c Previous State","color: #9E9E9E; font-weight: bold;",s),console.log("%c Next State","color: #2196F3; font-weight: bold;",n),o){console.log("%c Differences","color: #FF5722; font-weight: bold;");let c=D(s,n);console.log(c)}return console.groupEnd(),n}}function K(t,e={}){let{blacklist:o=[]}=e,n={};if(typeof window<"u"&&window.localStorage)try{let s=localStorage.getItem(t);s&&(n=JSON.parse(s))}catch(s){console.error("Failed to load persisted state:",s)}return s=>{if(typeof window>"u"||!window.localStorage)return s;try{let r={...s};o.forEach(c=>{delete r[c]}),localStorage.setItem(t,JSON.stringify(r))}catch(r){console.error("Failed to persist state:",r)}return s}}function M(t){let e=0,o=null;return(n,s,r)=>{let c=Date.now();return c-e>=t?(e=c,n):(o=n,setTimeout(()=>{o&&(r(()=>o),o=null)},t-(c-e)),s)}}function D(t,e){if(t===e)return{};if(typeof t!="object"||t===null||typeof e!="object"||e===null)return{from:t,to:e};let o={};return Object.keys(t).forEach(n=>{if(!Object.prototype.hasOwnProperty.call(e,n))o[n]={from:t[n],to:void 0};else if(typeof t[n]=="object"&&t[n]!==null&&typeof e[n]=="object"&&e[n]!==null){let s=D(t[n],e[n]);Object.keys(s).length>0&&(o[n]=s)}else Object.is(t[n],e[n])||(o[n]={from:t[n],to:e[n]})}),Object.keys(e).forEach(n=>{Object.prototype.hasOwnProperty.call(t,n)||(o[n]={from:void 0,to:e[n]})}),o}function _(t,e={}){let{maxSnapshots:o=100,autoSnapshot:n=!1,autoSnapshotInterval:s=5e3}=e,r=[],c=-1,a=null,l=f=>{let T={state:{...t.getState()},timestamp:Date.now(),description:f};c<r.length-1&&(r=r.slice(0,c+1)),r.push(T),c=r.length-1,r.length>o&&(r.shift(),c--)},i=f=>{f>=0&&f<r.length&&(c=f,t.setState(()=>r[f].state))},u=()=>{r=[],c=-1},p=()=>c>0,g=()=>c<r.length-1,d=()=>{p()&&i(c-1)},y=()=>{g()&&i(c+1)};return n&&s>0&&(a=setInterval(()=>{l("Auto snapshot")},s)),l("Initial state"),{getSnapshots:()=>r,takeSnapshot:l,applySnapshot:i,clearSnapshots:u,canUndo:p,canRedo:g,undo:d,redo:y}}function F(t={}){let{snapshotFilter:e}=t;return(o,n,s)=>(!e||e(o,n),o)}function O(t){return function(o,n={}){let{actionName:s="async_action_"+Math.random().toString(36).substr(2,9),onStart:r,onSuccess:c,onError:a,onFinally:l}=n;return t(i=>{i.loading={...i.loading,[s]:!0},i.errors={...i.errors,[s]:null}}),r&&r(),o().then(i=>(t(u=>{u.loading={...u.loading,[s]:!1}}),c&&c(i),i)).catch(i=>{throw t(u=>{u.loading={...u.loading,[s]:!1},u.errors={...u.errors,[s]:i}}),a&&a(i),i}).finally(()=>{l&&l()})}}function A(){return t=>(t.loading||(t.loading={}),t.errors||(t.errors={}),t)}function k(t){return function(){let o=t();return O(o)}}function L(t,e){return!e||e.length===0?Object.values(t.loading).some(Boolean):e.some(o=>t.loading[o])}function J(t,e){if(!e||e.length===0)return t.errors;let o={};return e.forEach(n=>{o[n]=t.errors[n]||null}),o}function x(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let o=Object.keys(t),n=Object.keys(e);if(o.length!==n.length)return!1;for(let s=0;s<o.length;s++){let r=o[s];if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1}return!0}function w(t,e={}){let{equalityFn:o=x,deps:n=[]}=e,s,r,c=n,a=l=>{if(c.length!==l.length)return!0;for(let i=0;i<l.length;i++)if(!Object.is(c[i],l[i]))return!0;return!1};return l=>{if(s&&r!==void 0&&(Object.is(l,s)||!a(n)))return r;let i=selector(l);return r!==void 0&&o(r,i)?r:(s=l,r=i,c=n,i)}}function R(t,e,o={}){return w(n=>{let s=t.map(r=>r(n));return e(s)},o)}function I(){return{createSelector:(t,e={})=>w(t,e),createCombinedSelector:(t,e,o={})=>R(t,e,o)}}function P(t,e){let o=()=>t.getState()[e];return{getSlice:o,setSlice:c=>{t.setState(a=>{if(typeof c=="function"){let l=c(a[e]);l!==void 0&&(a[e]={...a[e],...l})}else a[e]={...a[e],...c}})},select:c=>c(o()),slice:c=>G(t,e,c)}}function G(t,e,o){let n=()=>t.getState()[e][o];return{getSlice:n,setSlice:a=>{t.setState(l=>{if(typeof a=="function"){let i=a(l[e][o]);i!==void 0&&(l[e][o]={...l[e][o],...i})}else l[e][o]={...l[e][o],...a}})},select:a=>a(n()),slice:a=>{throw new Error("Nesting slices beyond 2 levels is not supported")}}}function N(t){return function(o){let[n,s]=t();return[n[o],a=>{s(l=>{if(typeof a=="function"){let i=a(l[o]);i!==void 0&&(l[o]={...l[o],...i})}else l[o]={...l[o],...a}})}]}}0&&(module.exports={createAsyncAction,createAsyncMiddleware,createCombinedSelector,createHooks,createLoggerMiddleware,createPersistMiddleware,createSelector,createSelectorFactory,createSlice,createSnapshotManager,createSnapshotMiddleware,createStore,createThrottleMiddleware,createUseAsyncAction,createUseSlice,getErrors,isLoading,shallowEqual});
